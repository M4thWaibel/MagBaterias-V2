<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mag Pro</title>
    <link rel="stylesheet" href="src/style/global.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
    <header>
        <h1>ðŸ”‹ MagBaterias - Sistema de Estoque PRO</h1>
        <div class="header-info">
            <span>VersÃ£o 2.0 - Completo e Moderno</span>
            <span id="current-date"></span>
        </div>
    </header>

    <div class="container">
        <nav id="navigation">
            <button class="nav-btn active" data-section="dashboard">ðŸ“Š Dashboard</button>
            <button class="nav-btn" data-section="inventory">ðŸ“¦ Estoque</button>
            <button class="nav-btn" data-section="sales">ðŸ›’ Vendas</button>
            <button class="nav-btn" data-section="history">ðŸ“‹ HistÃ³rico</button>
            <button class="nav-btn" data-section="reports">ðŸ“ˆ RelatÃ³rios</button>
        </nav>

        <div class="main">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <div class="card">
                    <div class="card-header">
                        <h2>ðŸ“Š Dashboard</h2>
                    </div>

                    <div class="stats-grid" id="stats-grid">
                        <div class="stat-card">
                            <h3>Produtos em Estoque</h3>
                            <div class="value" id="stat-products">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Quantidade Total</h3>
                            <div class="value" id="stat-quantity">0</div>
                        </div>
                        <div class="stat-card success">
                            <h3>Vendas do MÃªs</h3>
                            <div class="value" id="stat-sales">0</div>
                        </div>
                        <div class="stat-card warning">
                            <h3>Produtos Baixos</h3>
                            <div class="value" id="stat-low-stock">0</div>
                        </div>
                        <div class="stat-card success">
                            <h3>Faturamento MÃªs</h3>
                            <div class="value" id="stat-revenue">R$ 0</div>
                        </div>
                        <div class="stat-card danger">
                            <h3>Produtos CrÃ­ticos</h3>
                            <div class="value" id="stat-critical">0</div>
                        </div>
                    </div>

                    <div style="background: var(--color-bg); padding: var(--spacing-lg); border-radius: var(--radius-md);">
                        <h3 style="margin-bottom: var(--spacing-md);">ðŸ“¦ Produtos com Baixo Estoque</h3>
                        <table id="low-stock-table">
                            <thead>
                                <tr>
                                    <th>Produto</th>
                                    <th>Estoque</th>
                                    <th>MÃ­nimo</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="low-stock-body">
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Inventory Section -->
            <section id="inventory" class="section">
                <div class="card">
                    <div class="card-header">
                        <h2>ðŸ“¦ Gerenciamento de Estoque</h2>
                        <button class="btn btn-primary" id="add-product-btn">+ Adicionar Produto</button>
                    </div>

                    <div class="inventory-filters">
                        <input type="text" id="search-inventory" placeholder="ðŸ” Buscar produto...">
                        <select id="filter-category">
                            <option value="">Todas as Categorias</option>
                            <option value="Automotivo">Automotivo</option>
                            <option value="Industrial">Industrial</option>
                            <option value="DomÃ©stico">DomÃ©stico</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>

                    <div id="alert-container"></div>

                    <table id="inventory-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Produto</th>
                                <th>Categoria</th>
                                <th>PreÃ§o</th>
                                <th>Estoque</th>
                                <th>MÃ­nimo</th>
                                <th>Status</th>
                                <th>AÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-body">
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Sales Section -->
            <section id="sales" class="section">
                <div class="card">
                    <div class="card-header">
                        <h2>ðŸ›’ Nova Venda</h2>
                    </div>

                    <div class="customer-info">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Nome do Cliente</label>
                                <input type="text" id="customer-name" placeholder="Digite o nome do cliente">
                            </div>
                            <div class="form-group">
                                <label>CPF/CNPJ</label>
                                <input type="text" id="customer-document" placeholder="00.000.000/0000-00">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Selecione um Produto</label>
                        <select id="product-select">
                            <option value="">-- Selecione um produto --</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Quantidade</label>
                            <input type="number" id="quantity-input" min="1" value="1">
                        </div>
                        <div class="form-group">
                            <button class="btn btn-primary btn-full" id="add-to-cart-btn">Adicionar ao Carrinho</button>
                        </div>
                    </div>

                    <div class="cart-container">
                        <div class="cart-items">
                            <h3 style="margin-bottom: var(--spacing-md);">ðŸ›’ Itens da Venda</h3>
                            <table id="cart-table">
                                <thead>
                                    <tr>
                                        <th>Produto</th>
                                        <th>Qty</th>
                                        <th>PreÃ§o Unit.</th>
                                        <th>Subtotal</th>
                                        <th>AÃ§Ã£o</th>
                                    </tr>
                                </thead>
                                <tbody id="cart-body">
                                </tbody>
                            </table>
                            <div id="empty-cart-message" class="empty-state" style="display: none;">
                                <div class="empty-state-icon">ðŸ›’</div>
                                <p>Nenhum item no carrinho</p>
                            </div>
                        </div>

                        <div class="cart-summary">
                            <h3>Resumo da Venda</h3>
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="summary-subtotal">R$ 0,00</span>
                            </div>
                            <div class="summary-row">
                                <span>Desconto (%):</span>
                                <input type="number" id="discount-input" min="0" max="100" value="0" style="width: 80px; padding: 4px;">
                            </div>
                            <div class="summary-row">
                                <span>Desconto (R$):</span>
                                <span id="summary-discount">R$ 0,00</span>
                            </div>
                            <div class="summary-row total">
                                <span>Total:</span>
                                <span id="summary-total">R$ 0,00</span>
                            </div>
                            <button class="btn btn-success btn-full" id="finalize-sale-btn" style="margin-top: var(--spacing-md);">âœ“ Finalizar Venda</button>
                            <button class="btn btn-secondary btn-full" id="cancel-sale-btn" style="margin-top: var(--spacing-sm);">Limpar Carrinho</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- History Section -->
            <section id="history" class="section">
                <div class="card">
                    <div class="card-header">
                        <h2>ðŸ“‹ HistÃ³rico de Vendas</h2>
                        <button class="btn btn-secondary" id="export-history-btn">ðŸ“¥ Exportar CSV</button>
                    </div>

                    <div class="inventory-filters">
                        <input type="date" id="filter-date-start">
                        <input type="date" id="filter-date-end">
                        <input type="text" id="search-history" placeholder="ðŸ” Buscar cliente...">
                        <button class="btn btn-secondary" id="filter-history-btn">Filtrar</button>
                    </div>

                    <table id="history-table">
                        <thead>
                            <tr>
                                <th>ID Venda</th>
                                <th>Data</th>
                                <th>Cliente</th>
                                <th>Produtos</th>
                                <th>Total</th>
                                <th>AÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody id="history-body">
                        </tbody>
                    </table>
                    <div id="empty-history-message" class="empty-state" style="display: none;">
                        <div class="empty-state-icon">ðŸ“‹</div>
                        <p>Nenhuma venda registrada</p>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="section">
                <div class="card">
                    <div class="card-header">
                        <h2>ðŸ“ˆ RelatÃ³rios</h2>
                    </div>

                    <div class="form-group">
                        <label>PerÃ­odo</label>
                        <div class="form-row">
                            <input type="date" id="report-start-date">
                            <input type="date" id="report-end-date">
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md); margin-bottom: var(--spacing-lg);">
                        <div style="background: linear-gradient(135deg, #10b981 0%, #6ee7b7 100%); color: white; padding: var(--spacing-lg); border-radius: var(--radius-lg);">
                            <div style="font-size: 12px; opacity: 0.9; margin-bottom: var(--spacing-sm);">Total de Vendas</div>
                            <div style="font-size: 24px; font-weight: 700;" id="report-total-sales">0</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%); color: white; padding: var(--spacing-lg); border-radius: var(--radius-lg);">
                            <div style="font-size: 12px; opacity: 0.9; margin-bottom: var(--spacing-sm);">Receita Total</div>
                            <div style="font-size: 24px; font-weight: 700;" id="report-total-revenue">R$ 0,00</div>
                        </div>
                        <div style="background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); color: white; padding: var(--spacing-lg); border-radius: var(--radius-lg);">
                            <div style="font-size: 12px; opacity: 0.9; margin-bottom: var(--spacing-sm);">Ticket MÃ©dio</div>
                            <div style="font-size: 24px; font-weight: 700;" id="report-avg-ticket">R$ 0,00</div>
                        </div>
                    </div>

                    <h3 style="margin-top: var(--spacing-lg); margin-bottom: var(--spacing-md);">Produtos Mais Vendidos</h3>
                    <table id="report-table">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Quantidade Vendida</th>
                                <th>Receita</th>
                                <th>Ticket MÃ©dio</th>
                            </tr>
                        </thead>
                        <tbody id="report-body">
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>

    <!-- Modal for Add/Edit Product -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Adicionar Produto</h3>
                <button class="close-btn" onclick="closeModal('product-modal')">Ã—</button>
            </div>
            <form id="product-form">
                <div class="form-group">
                    <label>Nome do Produto</label>
                    <input type="text" id="form-product-name" required>
                </div>
                <div class="form-group">
                    <label>Categoria</label>
                    <select id="form-product-category" required>
                        <option value="">-- Selecione --</option>
                        <option value="Automotivo">Automotivo</option>
                        <option value="Industrial">Industrial</option>
                        <option value="DomÃ©stico">DomÃ©stico</option>
                        <option value="Outro">Outro</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>PreÃ§o (R$)</label>
                        <input type="number" id="form-product-price" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Quantidade em Estoque</label>
                        <input type="number" id="form-product-quantity" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Quantidade MÃ­nima</label>
                    <input type="number" id="form-product-minimum" required>
                </div>
                <div class="form-group">
                    <label>DescriÃ§Ã£o</label>
                    <textarea id="form-product-description" rows="3" placeholder="DescriÃ§Ã£o do produto..."></textarea>
                </div>
                <div style="display: flex; gap: var(--spacing-md);">
                    <button type="submit" class="btn btn-primary btn-full">Salvar Produto</button>
                    <button type="button" class="btn btn-secondary btn-full" onclick="closeModal('product-modal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Sale Details -->
    <div class="modal" id="sale-details-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalhes da Venda</h3>
                <button class="close-btn" onclick="closeModal('sale-details-modal')">Ã—</button>
            </div>
            <div id="sale-details-content"></div>
            <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-lg);">
                <button class="btn btn-primary btn-full" onclick="generatePDF()">ðŸ“„ Gerar PDF da Nota</button>
                <button class="btn btn-secondary btn-full" onclick="closeModal('sale-details-modal')">Fechar</button>
            </div>
        </div>
    </div>
    <script src="src/js/script.js"></script>
</body>
</html>